<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Jelly Documentation</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../style.css">
    <script src="../script.js"></script>
</head>

<body>
    <div class="MiniBar" id="MiniBar">
        <a id="MenuButton" href="javascript:void(0)" class="MenuButton" onclick="handleNav()">&times;</a>
    </div>
    <div class="SideBar" id="SideBar">
        <a href="../index.html" class="SidebarItem">
            <div class="HStack VerticalyCentered">
                <img class="Logo" src="../assets/logo.png" width="50" height="50" />
                <h1 class="LogoHeader">Jelly</h1>
            </div>
        </a>
        <hr>
        <a class="SidebarItem" href="./Shortcuts_Standard/index.html">
            <h1 class="SidebarItemHeader">Shortcuts Standard</h1>
        </a>
        <hr>
        <a class="SidebarItem" href="./basics.html">
            <h1 class="SidebarItemHeader">Language Guide</h1>
        </a>
        <ol>
            <a href="./basics.html">
                <p>The Basics</p>
            </a>
            <a href="./importing.html">
                <p>Importing Libraries</p>
            </a>
            <a href="./variables.html">
                <p>Traditional Variables</p>
            </a>
            <a href="./magic_variables.html">
                <p>Magic Variables</p>
            </a>
            <a href="./global.html">
                <p>Global Variables</p>
            </a>
            <a href="./strings.html">
                <p>Strings</p>
            </a>
            <a href="./metadata.html">
                <p>Declared Metadata</p>
            </a>
            <a href="./property.html">
                <p>Property Modifier</p>
            </a>
            <a href="./key.html">
                <p>Key Modifier</p>
            </a>
            <a href="./type.html">
                <p>Type Casting</p>
            </a>
            <a href="./if_else.html">
                <p>If & Else Statments</p>
            </a>
            <a href="./repeat.html">
                <p>Repeat & Repeat Each</p>
            </a>
            <a href="./functions_macros.html">
                <p><b>Functions & Macros</b></p>
            </a>
            <a href="./menus.html">
                <p>Menus</p>
            </a>

        </ol>

        <hr>
        <a class="SidebarItem" href="../Shortcuts_Standard_Library/index.html">
            <h1 class="SidebarItemHeader">Shortcuts Standard</h1>
        </a>
        <hr>
        <!-- <a class="SidebarItem" href="../Jellycuts_Library/index.html">
            <h1 class="SidebarItemHeader">Jellycuts Library</h1>
        </a>
        <hr>
        <a class="SidebarItem" href="../The_Wallpaper_App_Library/index.html">
            <h1 class="SidebarItemHeader">The Wallpaper App Library</h1>
        </a>
        <hr> -->
        <div class="HStack VerticalyCentered" style="margin-top: 10px;">
            <a class="SidebarItem" href="https://jellycuts.com">
                <h1 class="SidebarButton" style="width: 20px;height: 20px; font-size: 14px;">üè†</h1>
            </a>
            <a class="SidebarItem" href="javascript:void(0)" onclick="handleNav()">
                <h1 class="SidebarButton" style="width: 125px;height: 20px;">Close Sidebar</h1>
            </a>
        </div>
        <div style="margin-bottom: 40px;">
        </div>
    </div>
    <div class="Main" id="Main">
        <h1 id='global-variables'>Functions & Macros</h1>
        <p>Functions and Macros are close to each other but not the same. There is <strong>one</strong> big difference between the two. A macro will copy the code inside it to wherever you call it. And a function will create a call to the code that is inside it. The rest of this page will dive into how the two differ, along with how they are represented inside shortcuts.</p>
        <h4 data-heading="Important Note">Important Note</h4>
        <p>Both functions &amp; macros must be defined before they are called. You can not call a function before it has been defined. For example:</p>
        <pre>
<code>// This is valid
func test() { }
test()</code></pre>
        <pre><code>// This is not valid
test()
func test() { }</code></pre>
        <h2 data-heading="Functions">Functions</h2>
        <p>In the following code, we create a function called <code>lookAt</code> which takes the parameter input. Inside the function, you are able to use the input parameter as a mutable variable, however it will not mutate the variable you pass when the function as called. This is because on a function call, the parameter values are copied, not referenced.</p>
        <pre><code>// Function in Jelly
func lookAt(input) {
    quicklook(input: input)
    var x = 42
}
        
lookAt(Shortcut Input)</code></pre>
        <p>The below section is what the above code will produce in Shortcuts. As you can see, the function makes a call to the current shortcut that it is running in, with a dictionary that instructs the shortcut on what part of the shortcut it should run. This allows for function variables to be completely separate from the rest of your shortcuts variables.</p>
        <pre><code>// Transcribed Shortcuts Actions
IF Shortcut Input AS Dictionary WITH Key FUNCTION_CALL_NAME IS lookAt {
    // Your function code
    var input = Shortcut Input AS Dictionary WITH Key input
    QUICKLOOK input
} else {
    // Your unction Call
    DICTIONARY dictionary = {"FUNCTION_CALL_NAME": "lookAt", input: Shortcut Input}
    RUNSHORTCUT shortcut_name WITH dictionary
}</code></pre>
        <h3 data-heading="Returning data from functions">Returning data from functions</h3>
        <p>If you want to return data out of a function, it is a two-step process. First, you must include a <code>return</code> statement inside your function. Next, you need to add a magic variable to the end of the function call. </p>
        <p>A quick example of this:</p>
        <pre><code>func add40(input) {
    calculate("${input} + 40") &gt;&gt; hold
    return hold
}

var almostMeaningOfLife = 2
add40(almostMeaningOfLife) &gt;&gt; meaningOfLife
quicklook(meaningOfLife)</code></pre>
        <p>In this example we have a function, <code>add40</code> which takes in our input and adds 40 to it. Then we return this newly calculated value by using the <code>return</code> statement followed by our variable name. To extract the variable output from the function, we use the <code>&gt;&gt;</code> operator followed by the new magic variable name.</p>
        <h2 data-heading="Macros">Macros</h2>
        <p>In the following code, we will replicate the function <code>lookAt</code> that we created above, but this time we are going to define it as a macro. Defining it as a macro means that we will now be copying the code from inside the macro to where we call it. </p>
        <pre><code>// Macro in Jelly
macro lookAt(input) {
    quicklook(input: input)
}
        
lookAt(Shortcut Input)</code></pre>
        <p>The shortcuts actions that are created are much shorter now because there is no need for restructuring. The code is simply copied from inside the macro to where it is called, and a variable is created to represent the parameters.</p>
        <pre><code>// Transcribed Shortcuts Actions
var input = Shortcut Input
QUICKLOOK input</code></pre>
        <p>Because of the nature of macros, it is possible to edit variables that have been created before the macro is called, inside the macro. This can look like the following:</p>
        <pre><code>var x = Current Date
        
macro lookAt(input) {
    x = Current Date
    quicklook(input: input)
    y = Current Date
}

    var y = Current Date
        
    lookAt(input: Shortcut Input)</code></pre>
        <h3 data-heading="Returning data from macros">Returning data from macros</h3>
        <p>Returning data from a macro is exactly the same as a function. It is also a two-step process that starts with including a <code>return</code> statement in the macro, followed by adding a magic variable to the macro call.</p>
        <p>A quick example of this:</p>
        <pre><code>macro subtract40(input) {
    calculate("${input} + 40") &gt;&gt; hold
    return hold
}
        
var almostMeaningOfLife = 82
subtract40(almostMeaningOfLife) &gt;&gt; meaningOfLife
quicklook(meaningOfLife)</code></pre>
        <p>In this example we have a macro, <code>subtract40</code> which takes in our input and subtracts 40 from it. Then we return this newly calculated value by using the <code>return</code> statement followed by our variable name. To extract the variable output from the macro, we use the <code>&gt;&gt;</code> operator followed by the new magic variable name.</p>
                    </div>

</body>

</html>